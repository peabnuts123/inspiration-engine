<!-- Markup -->
<h2>Locations</h2>

<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="controlPanelHeading">
            <h4 class="panel-title">
                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#controlsPanel" aria-expanded="true" aria-controls="controlsPanel">Controls <small><em>Click to toggle</em></small></a>
            </h4>
        </div>
        <div id="controlsPanel" class="panel-collapse collapse" role="tabpanel" aria-labelledby="controlPanelHeading">
            <div class="panel-body">
                <form class="form-horizontal">
                    <!-- Rows -->
                    <div class="form-group">
                        <label for="rowInput" class="col-sm-2 control-label">Rows</label>
                        <div class="col-sm-10">
                            <input type="number" 
                                class="form-control" 
                                id="rowInput" 
                                bind:value="numRows" 
                                min="1" 
                            />
                        </div>
                    </div>

                    <!-- Columns -->
                    <div class="form-group">
                        <label for="colInput" class="col-sm-2 control-label">Columns</label>
                        <div class="col-sm-10">
                            <input type="number" 
                                class="form-control" 
                                id="colInput" 
                                bind:value="numColumns" 
                                min="1" 
                            />
                        </div>
                    </div>

                    <!-- Update Buttons -->
                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <button type="button" class="btn btn-primary" on:click="set({ generatedLocationRows: generateLocationNames(numRows, numColumns)})">Update</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<table class="table table-striped table-hover">
    <tbody>
        {{#each generatedLocationRows as row}}
        <tr class="text-center">
            {{#each row as generatedLocation}}
            <td>{{generatedLocation}}</td>
            {{/each}}
        </tr>
        {{/each}}
    </tbody>
</table>


<!-- Code -->
<script type="text/javascript">
    var names = [
        'Really Dangerous',
        'Uncanny',
        'Forbidden',
        'Fantasy',
        'Dire',
        'Galloping',
        'Cartoon',
        'Miyazaki',
        'Silicon',
        'Frictional',
        'Barked',
        'Rough',
        'Hilly',
        'Vile',
        'Swampy',
        'Marshy',
        'Jarvis',
        'Andrews',
        'Entombed',
        'Magical',
        'Rocky',
        'Dark',
        'Beautiful',
        'Autumnal',
        'Villainous',
        'Calm',
        'Eastern',
        'Western',
        'Northern',
        'Southern',
        'Far',
        'Queens',
        'Uncharted',
        'Unplottable',
        'Marble',
        'Paper',
        'Golden',
        'Smokey',
        'Foggy',
        'Misty',
        'Rainy',
        'Thunder',
        'Windy',
        'Big Boss',
        'Smugglers',
        'Neon',
        'Blue',
        'Red',
        'Endless',
        'Wooded',
        'Flooded',
        'Godrics',
        'Salazaars',
        'Helgas',
        'Rowenas',
        'Hogwarts',
        'Bills',
        'Cao Cao',
        'Liu Bai',
        'Liu Bai',
        'Wai Lin',
        'Bo Hao',
        'Su Mai',
        'Har Gao',
        'Shigeru',
        'Miyamoto',
        'Rollo',
        'Solar',
        'Lam',
        'Sinoma',
        'Rubico',
        'Sino',
        'Kappa'
    ];

    var locations = [
        'Roads',
        'Valley',
        'Forest',
        'Fields',
        'Docks',
        'Gorge',
        'Encampment',
        'Jungle',
        'Plains',
        'Temple',
        'Farmlands',
        'Gulley',
        'Outcrop',
        'Trails',
        'Drylands',
        'Ocean',
        'Ethereal Plane',
        'Labyrinth',
        'Crag',
        'Cliffs',
        'Cavern',
        'Cave',
        'Mountain',
        'Sea',
        'Lake',
        'River',
        'Archives',
        'Dungeon',
        'Village',
        'Megacity',
        'Megalopolis',
        'Path',
        'Cove',
        'Bay',
        'Desert',
        'Casino',
        'Hideout',
        'Gardens',
        'Glade',
        'Hollow',
        'School',
        'Way',
        'Volcano',
        'Maze',
        'House',
        'Passage',
        'Pass',
        'Ports',
        'Belt',
        'Starscape',
        'Plaza',
        'Ministry',
        'Castle'
    ];

    var attributes = [
        'Death',
        'Life',
        'Sacrifice',
        'Innovation',
        'Networking',
        'Magic',
        'Confusion',
        'Imminent Death',
        'Unity',
        'Harmony',
        'Chaos',
        'Entropy',
        'Order',
        'Unpredictability',
        'Resolution',
        'GabeN',
        'Time',
        'Fire',
        'Air',
        'Earth',
        'Water',
        'Lightening',
        'Jasaar',
        'Mystery',
        'Jas’kar',
        'Clarity',
        'Susan Jessica',
        'Witchcraft and Wizardry',
        'Might',
        'Advancement',
        'Popularity',
        'Ja’den Dionne',
        'Feline Dion',
        'Dion Blaster',
        'Power Tennis'
    ];

    function randomArrayItem(array) {
        return array[~~(Math.random() * array.length)];
    }

    function randomLocationName() {
        var locationName = randomArrayItem(names) + " " + randomArrayItem(locations);

        if (Math.random() <= 0.15) {
            locationName += " of " + randomArrayItem(attributes);
        }

        return locationName;
    }

    function generateLocationNames(numRows, namesPerRow) {
        var names = [];
        for (var row = 0; row < numRows; row++) {
            var namesRow = [];
            for (var col = 0; col < namesPerRow; col++) {
                namesRow.push(randomLocationName());
            }

            names.push(namesRow);
        }

        return names;
    }

    export default {
        helpers: {
            generateLocationNames: generateLocationNames
        },
        onrender: function () {
            this.set({
                generatedLocationRows: generateLocationNames(this.get('numRows'), this.get('numColumns'))
            })
        },
        data: function data() {
            return {
                generatedLocationRows: [],
                numRows: 10,
                numColumns: 3
            }
        }
    }

</script>